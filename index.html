<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHM 201 Portal | Instructor Daniel Leonard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --premium-blue: #1a365d;
            --accent-blue: #2b6cb0;
            --ash-light: #f4f4f5;
            --ash-border: #e2e8f0;
            --white: #ffffff;
            --success: #2f855a;
            --danger: #c53030;
            --warning: #e53e3e;
        }

        body { font-family: 'Inter', sans-serif; background-color: var(--ash-light); color: #2d3748; margin: 0; padding: 0; }

        /* Navigation Tabs */
        .tab-container { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); display: flex; z-index: 3000; border: 1px solid var(--ash-border); border-radius: 8px; overflow: hidden; background: white; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .tab-btn { border: none; padding: 10px 25px; cursor: pointer; font-weight: 600; color: var(--premium-blue); background: white; transition: 0.3s; }
        .tab-btn.active { background: var(--premium-blue); color: white; }

        /* Landing Page */
        #landing-page { 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            min-height: 100vh; width: 100%; position: relative; z-index: 2000;
            background: linear-gradient(rgba(26, 54, 93, 0.9), rgba(26, 54, 93, 0.9)), #1a365d;
        }

        .card { background: var(--white); padding: 30px; border-radius: 16px; box-shadow: 0 20px 40px rgba(0,0,0,0.3); width: 90%; max-width: 360px; text-align: center; }
        
        .instructor-frame {
            width: 80px; height: 80px; border-radius: 50%; border: 3px solid var(--premium-blue);
            margin: 0 auto 15px auto; overflow: hidden; background: #eee;
        }
        .instructor-frame img { width: 100%; height: 100%; object-fit: cover; }

        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid var(--ash-border); border-radius: 8px; box-sizing: border-box; font-size: 14px; }
        .btn { background: var(--premium-blue); color: white; border: none; padding: 15px; width: 100%; border-radius: 8px; font-weight: 700; cursor: pointer; margin-top: 15px; }

        /* Quiz UI */
        #quiz-container { display: none; max-width: 800px; margin: 0 auto; padding: 20px; padding-bottom: 60px; }
        .nav-bar { position: sticky; top: 0; background: var(--premium-blue); color: white; padding: 15px 25px; display: flex; justify-content: space-between; align-items: center; z-index: 1000; border-radius: 0 0 10px 10px; }
        .timer-box { background: rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 8px; font-weight: 700; font-size: 1.2rem; }
        .timer-warning { background: var(--warning) !important; }

        .question-card { background: var(--white); padding: 20px; border-radius: 10px; margin-top: 20px; border: 1px solid var(--ash-border); }
        .correct { border-left: 8px solid var(--success); }
        .wrong { border-left: 8px solid var(--danger); }
        .ans-label { color: var(--success); font-weight: 700; display: block; margin-top: 10px; font-size: 0.85rem; padding: 8px; background: #f0fff4; border-radius: 4px; }
        
        .option { display: block; padding: 10px; border: 1px solid #edf2f7; border-radius: 8px; margin-top: 8px; cursor: pointer; }

        /* Admin Dashboard */
        #admin-page { display:none; padding: 100px 20px 20px 20px; flex-direction: column; align-items: center; }
        .admin-table { width: 100%; max-width: 800px; border-collapse: collapse; background: white; }
        .admin-table th, .admin-table td { border: 1px solid var(--ash-border); padding: 12px; text-align: left; }

        #results-area { display: none; max-width: 800px; margin: 80px auto; padding: 20px; }
    </style>
</head>
<body>

<div class="tab-container" id="tabs">
    <button class="tab-btn active" id="studentTab" onclick="showTab('student')">Login</button>
    <button class="tab-btn" id="adminTab" onclick="showTab('admin')">Admin</button>
</div>

<div id="landing-page">
    <div class="card">
        <div class="instructor-frame">
            <img src="https://via.placeholder.com/80?text=DL" alt="Daniel Leonard">
        </div>
        <h3 style="margin: 0; color: var(--premium-blue);">Daniel Leonard</h3>
        <p style="font-size: 0.8rem; color: #718096; margin-bottom: 20px;">CHM 201 Course Portal</p>
        
        <input type="text" id="studentName" placeholder="Full Name">
        <input type="text" id="studentID" placeholder="Matric Number">
        <input type="password" id="accessCode" placeholder="Access Code (2020)">
        
        <button class="btn" onclick="validateStudent()">START EXAM</button>
    </div>
</div>

<div id="quiz-container">
    <div class="nav-bar">
        <div><b id="displayUserName">Student</b><br><small>7 Minute Limit</small></div>
        <div class="timer-box" id="timer">07:00</div>
    </div>
    <form id="quizForm">
        <div id="questions-wrapper"></div>
        <button type="button" class="btn" style="margin-top: 40px; background: var(--success);" onclick="confirmSubmission()">SUBMIT SCRIPT</button>
    </form>
</div>

<div id="results-area">
    <div class="card" style="max-width: 100%; margin-bottom: 20px;">
        <h2>Score: <span id="final-score"></span></h2>
        <p>Candidate: <span id="resName"></span></p>
        <button class="btn" onclick="location.reload()" style="width: 120px;">Restart</button>
    </div>
    <div id="review-container"></div>
</div>

<div id="admin-page">
    <h2>Submissions</h2>
    <table class="admin-table">
        <thead><tr><th>Name</th><th>ID</th><th>Score</th></tr></thead>
        <tbody id="admin-data"></tbody>
    </table>
    <button class="btn" onclick="localStorage.clear(); refreshAdminData();" style="width: 200px; background: var(--danger);">Clear Records</button>
</div>

<script>
    const questions = [
        { q: "Which boron compound is used as a mild antiseptic?", options: ["Borax", "Boric acid", "Boron oxide", "Brown boron"], correct: "B" },
        { q: "Graphite is a good electrical conductor because of:", options: ["Rigid 3-D framework", "Delocalized π-electrons", "sp³ hybridization", "High density"], correct: "B" },
        { q: "The most abundant metal in the Earth’s crust is:", options: ["Iron", "Silicon", "Aluminium", "Calcium"], correct: "C" },
        { q: "What is the dominant oxidation state of most Group 14 elements?", options: ["+2", "+3", "+4", "+6"], correct: "C" },
        { q: "Which halide of Group 14 is ionic?", options: ["SnCl₄", "PbCl₄", "SnF₄", "CCl₄"], correct: "C" }
        // ... (remaining questions can be added back here)
    ];

    let timeLeft = 420; // 7 Minutes
    let timerId;

    function showTab(type) {
        document.getElementById('landing-page').style.display = type === 'student' ? 'flex' : 'none';
        document.getElementById('admin-page').style.display = type === 'admin' ? 'flex' : 'none';
        document.getElementById('studentTab').classList.toggle('active', type === 'student');
        document.getElementById('adminTab').classList.toggle('active', type === 'admin');
        if(type === 'admin') refreshAdminData();
    }

    function validateStudent() {
        const name = document.getElementById('studentName').value;
        const id = document.getElementById('studentID').value;
        const code = document.getElementById('accessCode').value;
        if(!name || !id) return alert("Fill Name and ID");
        if(code !== "2020") return alert("Invalid Code");

        document.getElementById('displayUserName').innerText = name;
        document.getElementById('landing-page').style.display = 'none';
        document.getElementById('tabs').style.display = 'none';
        document.getElementById('quiz-container').style.display = 'block';
        
        renderQuestions();
        startTimer();
    }

    function renderQuestions() {
        const wrapper = document.getElementById('questions-wrapper');
        wrapper.innerHTML = "";
        questions.forEach((q, i) => {
            const div = document.createElement('div');
            div.className = 'question-card';
            div.id = `q-${i}`;
            div.innerHTML = `<b>${i+1}. ${q.q}</b><br>` + 
                q.options.map((opt, idx) => `
                <label class="option">
                    <input type="radio" name="q${i}" value="${String.fromCharCode(65+idx)}"> 
                    ${String.fromCharCode(65+idx)}. ${opt}
                </label>`).join('');
            wrapper.appendChild(div);
        });
    }

    function startTimer() {
        timerId = setInterval(() => {
            let m = Math.floor(timeLeft/60), s = timeLeft%60;
            document.getElementById('timer').innerText = `${m}:${s < 10 ? '0' : ''}${s}`;
            if(timeLeft <= 60) document.getElementById('timer').parentElement.classList.add('timer-warning');
            if(timeLeft-- <= 0) gradeTest();
        }, 1000);
    }

    function confirmSubmission() { if(confirm("Submit Exam?")) gradeTest(); }

    function gradeTest() {
        clearInterval(timerId);
        let score = 0;
        const form = document.getElementById('quizForm');
        const review = document.getElementById('review-container');
        review.innerHTML = "<h3>Review Your Answers:</h3>";

        questions.forEach((q, i) => {
            const selected = form[`q${i}`].value;
            const card = document.getElementById(`q-${i}`);
            if(selected === q.correct) {
                score++;
                card.classList.add('correct');
            } else {
                card.classList.add('wrong');
                const label = document.createElement('div');
                label.className = 'ans-label';
                label.innerText = "Correct Answer: " + q.correct;
                card.appendChild(label);
            }
            review.appendChild(card);
        });

        // Save Result
        const log = JSON.parse(localStorage.getItem('chm_results') || '[]');
        log.push({ name: document.getElementById('studentName').value, id: document.getElementById('studentID').value, score: score });
        localStorage.setItem('chm_results', JSON.stringify(log));

        // Display Results
        document.getElementById('quiz-container').style.display = 'none';
        document.getElementById('results-area').style.display = 'block';
        document.getElementById('final-score').innerText = score + " / " + questions.length;
        document.getElementById('resName').innerText = document.getElementById('studentName').value;
    }

    function refreshAdminData() {
        const log = JSON.parse(localStorage.getItem('chm_results') || '[]');
        document.getElementById('admin-data').innerHTML = log.map(r => `<tr><td>${r.name}</td><td>${r.id}</td><td>${r.score}</td></tr>`).join('');
    }
</script>
</body>
</html>
